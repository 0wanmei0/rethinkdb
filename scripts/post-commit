# This script is meant to be run as a post-commit hook. There should be a reference of some sort
# from .git/hooks/post-commit to this script. It starts the tests running in a detached process.
# It will send an email to the user when they are done.

# It must be run in the root of the git repository, the directory with ".git" in it.

echo "Starting automated smoke tests; you will receive email in a minute."

# Tell 'retester' how to send email. The part before the colon is the email address to send
# from; the part after the colon is the password.
export RETESTER_EMAIL_SENDER=buildbot@rethinkdb.com:allspark

# -b means run in the background and produce no output.
git test -b --revision HEAD test/smoke_test.py &
