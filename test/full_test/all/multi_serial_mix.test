for (mode, checker) in [
        ("debug", "valgrind"),
        ("release", None)]:
    for protocol in ["text"]:
        for (cores, slices) in [(2, 8)]:
            # Regression test for https://github.com/coffeemug/rethinkdb/issues/269 and https://github.com/coffeemug/rethinkdb/issues/267
            do_test_fog("integration/multi_serial_mix.py",
                        { "auto"        : True,
                          "mode"        : mode,
                          "no-valgrind" : not checker,
                          "protocol"    : protocol,
                          "cores"       : cores,
                          "slices"      : slices,
                          "memory"      : 1,
                          "diff-log-size" : 0,
                          "serve-flags" : "--flush-timer 0 --wait-for-flush y",
                          "num-testers" : 128,
                          "duration"    : 420 },
                        repeat=3, timeout = 480)

